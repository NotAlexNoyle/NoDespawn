plugins {

    id "java"
    id "com.github.johnrengelman.shadow" version "7.1.2"
    
}

group = "net.trueog.nodespawn-og"
version = "2.0"

def apiVersion = "1.18.2"
def targetJavaVersion = 17

processResources {

    def props = [
        version: version,
        apiVersion: apiVersion,
    ]

    inputs.properties props // indicates to rerun if version changes

    filesMatching("plugin.yml") {

        expand props

    }

}

repositories {

    mavenCentral()

    maven {

        url "https://repo.purpurmc.org/snapshots" 

	}

	maven {

		name = "CodeMC"
        url = uri("https://repo.codemc.org/repository/maven-public/")

    }

}

dependencies {

    compileOnly "org.purpurmc.purpur:purpur-api:1.18.2-R0.1-SNAPSHOT"

	implementation("de.tr7zw:item-nbt-api:2.11.1")

}

shadowJar {

    minimize()
    
}

jar.dependsOn shadowJar

tasks.jar.configure {

    classifier = "part"
    
}

tasks.shadowJar.configure {

    classifier = null

}

compileJava {

    options.compilerArgs += ["-parameters"]
    options.fork = true
    options.forkOptions.executable = 'javac'

}
